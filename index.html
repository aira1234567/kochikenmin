/docs
 ├─ index.html
 ├─ style.css
 ├─ script.js
 └─ data.json

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>家賃×自然バランスマップ｜高知県</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>家賃 × 自然 バランスマップ</h1>
    <p>高知県の「住みやすさ」を可視化</p>
  </header>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="script.js"></script>
</body>
</html>

html, body {
  height: 100%;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

header {
  background-color: #0f172a;
  color: #fff;
  padding: 12px;
  text-align: center;
}

header h1 {
  margin: 0;
  font-size: 18px;
}

header p {
  margin: 4px 0 0;
  font-size: 12px;
  opacity: 0.8;
}

#map {
  height: calc(100% - 64px); /* ヘッダーを除いた高さ */
  width: 100%;
}
// 地図初期化（高知県中心）
const map = L.map("map").setView([33.5597, 133.5311], 9);

// タイル
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "© OpenStreetMap"
}).addTo(map);

// スコア計算：自然指数 ÷ 家賃
function calcScore(rent, nature) {
  return (nature / rent) * 10;
}

// 色分け
function getColor(score) {
  if (score > 6) return "#16a34a";  // 緑＝良
  if (score > 4) return "#84cc16";  // 黄緑＝やや良
  if (score > 2) return "#facc15";  // 黄＝普通
  return "#f97316";                  // オレンジ＝低評価
}

// データ読み込み
fetch("data.json")
  .then(res => res.json())
  .then(areas => {
    areas.forEach(area => {
      const score = calcScore(area.rent, area.nature);
      L.circleMarker([area.lat, area.lng], {
        radius: 10,
        color: getColor(score),
        fillColor: getColor(score),
        fillOpacity: 0.7
      })
      .addTo(map)
      .bindPopup(`
        <strong>${area.name}</strong><br>
        家賃：${area.rent}万円<br>
        自然指数：${area.nature}<br>
        バランス指数：${score.toFixed(1)}
      `);
    });
  })
  .catch(err => {
    console.error("data.json読み込みエラー:", err);
  });
[
  {"name":"高知市中心部","lat":33.5597,"lng":133.5311,"rent":6.5,"nature":3},
  {"name":"四万十市","lat":32.9919,"lng":132.9334,"rent":4.2,"nature":7},
  {"name":"仁淀川流域","lat":33.641,"lng":133.164,"rent":3.5,"nature":9},
  {"name":"室戸市","lat":33.289,"lng":134.151,"rent":3.8,"nature":8}
]
